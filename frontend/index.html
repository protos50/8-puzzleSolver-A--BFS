<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>8-Puzzle Solver (A* vs BFS)</title>
    <!-- Modular CSS -->
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/layout.css" />
    <link rel="stylesheet" href="css/grid.css" />
    <link rel="stylesheet" href="css/controls.css" />
    <link rel="stylesheet" href="css/stats.css" />
    <link rel="stylesheet" href="css/histogram.css" />
    <link rel="stylesheet" href="css/queue.css" />
    <link rel="stylesheet" href="css/tree.css" />
    <link rel="stylesheet" href="css/modal.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <script src="https://d3js.org/d3.v7.min.js"></script>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>8-Puzzle Solver</h1>
        <p>A* (Informed) vs BFS (Blind)</p>
      </header>

      <div class="boards-container">
        <div class="board-section">
          <h3>Solution View</h3>
          <div id="grid" class="grid"></div>
          <div class="solution-controls">
            <button id="sol-prev-btn" title="Previous Step">‚èÆ</button>
            <button id="sol-play-btn" title="Play/Pause">‚èØ</button>
            <button id="sol-next-btn" title="Next Step">‚è≠</button>
            <span id="sol-step-display">0/0</span>
          </div>
        </div>
        <div class="board-section">
          <h3>Exploration View</h3>
          <div id="grid-exploration" class="grid"></div>
        </div>
      </div>

      <div class="controls">
        <select id="difficulty-select">
          <option value="easy">Easy Mode</option>
          <option value="random" selected>Hard Mode</option>
        </select>
        <button id="shuffle-btn">Shuffle</button>
        <select id="algorithm-select">
          <option value="astar">A* Search</option>
          <option value="bfs">BFS</option>
        </select>
        <button id="solve-btn">Solve</button>
        <button id="replay-btn" style="display: none">Replay Animation</button>
        <span class="shuffle-mode-indicator" id="shuffle-mode">Mode: Hard</span>
      </div>
      
      <div class="bfs-controls" id="bfs-controls" style="display: none;">
        <label for="bfs-limit" title="Maximum nodes BFS will explore before stopping">BFS Safety Limit:</label>
        <select id="bfs-limit" title="Higher limits can solve harder puzzles but may freeze the browser">
          <option value="5000">5,000 nodes (fast)</option>
          <option value="10000" selected>10,000 nodes (balanced)</option>
          <option value="20000">20,000 nodes (slower)</option>
          <option value="50000">50,000 nodes (may freeze!)</option>
        </select>
        <span class="bfs-explanation">‚ö†Ô∏è BFS stops after reaching this limit to prevent slowness</span>
        <span class="difficulty-hint" id="difficulty-hint"></span>
      </div>

      <div id="stats-container" class="stats-container hidden">
        <div class="stat-box">
          <div class="stat-label">Nodes Explored</div>
          <div class="stat-value" id="stat-nodes">0</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">Time Taken</div>
          <div class="stat-value" id="stat-time">0s</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">Path Length</div>
          <div class="stat-value" id="stat-path">0</div>
        </div>
      </div>

      <div class="status" id="status">Click "Shuffle" to start</div>

      <!-- Sprint 2: Animation Controls -->
      <div class="animation-controls">
        <button id="pause-btn" disabled>‚è∏</button>
        <button id="skip-btn" disabled>‚è© Skip to End</button>
        <select id="speed-select" disabled>
          <option value="500">x0.5 (Slow)</option>
          <option value="200" selected>x1 (Normal)</option>
          <option value="100">x2 (Fast)</option>
          <option value="50">x3 (Very Fast)</option>
          <option value="20">x5 (Ultra Fast)</option>
          <option value="5">x20 (Instant)</option>
        </select>
      </div>

      <!-- Sprint 3: Node Details Panel -->
      <div class="node-details">
        <h3>Current Node Details</h3>
        <div class="detail-item">
          <span class="detail-label">Step:</span>
          <span class="detail-value" id="detail-step">-</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Level/Depth:</span>
          <span class="detail-value" id="detail-level">-</span>
        </div>
        <div class="detail-item">
          <span class="detail-label">Action:</span>
          <span class="detail-value" id="detail-action">-</span>
        </div>
        <!-- Sprint 6: A* Specifics -->
        <div class="detail-item astar-only hidden">
          <span class="detail-label">F Score:</span>
          <span class="detail-value" id="detail-f-score">-</span>
        </div>
        <div class="detail-item astar-only hidden">
          <span class="detail-label">G Score:</span>
          <span class="detail-value" id="detail-g-score">-</span>
        </div>
        <div class="detail-item astar-only hidden">
          <span class="detail-label">H Score:</span>
          <span class="detail-value" id="detail-h-score">-</span>
        </div>
      </div>

      <!-- Sprint 3: Level/Depth Histogram -->
      <div class="histogram-section">
        <h3>Level/Depth Distribution</h3>
        <div id="level-summary" class="level-summary">-</div>
        <div id="level-histogram" class="level-histogram"></div>
      </div>

      <!-- Sprint 4: Queue Visualization -->
      <div class="queue-section">
        <h3>Frontier (Queue of Nodes to Explore)</h3>
        <p class="queue-explanation">Shows the nodes waiting to be explored. Colors represent depth.</p>
        <div class="queue-label">Next 5 Nodes (Detailed View)</div>
        <div id="queue-next-up" class="queue-preview"></div>
        <div class="queue-label">Rest of Queue (Compact View - Each square = 1 node)</div>
        <div id="queue-grid" class="queue-grid"></div>
      </div>

      <!-- Sprint 5: Dynamic Search Tree -->
      <div class="tree-section">
        <div class="tree-header">
          <h3>Search Tree</h3>
        </div>
        <p class="tree-explanation">Use zoom (scroll or buttons) and drag to navigate. Click on a node to see its state.</p>
        <div id="tree-container" class="tree-container">
          <div class="tree-controls">
            <button id="zoom-in-btn" title="Zoom In">üîç+</button>
            <button id="zoom-out-btn" title="Zoom Out">üîç-</button>
            <button id="reset-zoom-btn" title="Reset Zoom">‚ü≤</button>
            <button id="toggle-grid-btn" title="Show/Hide Levels">‚óé</button>
            <button id="fullscreen-btn" title="Fullscreen">‚õ∂</button>
          </div>
        </div>
      </div>

      <!-- Modal to show node state -->
      <div id="node-modal" class="modal hidden">
        <div class="modal-content">
          <span class="modal-close">&times;</span>
          <h3 id="modal-title">Node State</h3>
          <div id="modal-grid" class="grid"></div>
          <div id="modal-info"></div>
        </div>
      </div>
    </div>

    <!-- Modular JavaScript -->
    <script src="js/state.js"></script>
    <script src="js/dom.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/rendering.js"></script>
    <script src="js/histogram.js"></script>
    <script src="js/queue.js"></script>
    <script src="js/tree.js"></script>
    <script src="js/solver.js"></script>
    <script src="js/events.js"></script>
  </body>
</html>


